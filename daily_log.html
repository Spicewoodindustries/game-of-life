<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Game of Life Quest ‚Äî Daily Log</title>
<style>
body{background:#001a66;color:#55ffff;font-family:"Courier New",monospace;padding:20px}
a{color:#ffff55}
table{border-collapse:collapse;width:100%;margin-top:16px}
th,td{border:1px solid #55ffff;padding:6px;text-align:left}
th{background:#0b2a7a}
</style>
</head>
<body>
<h1>üìò Daily Log</h1>
<p><a id="backToGame">‚¨Ö Back to Game</a></p>
<script>
  document.getElementById("backToGame").href =
    window.location.origin + window.location.pathname.replace("daily_log.html", "index.html");
</script>
<table id="logTable">
  <thead><tr><th>Date</th><th>Completed Quests</th><th>XP</th><th>GP</th></tr></thead>
  <tbody></tbody>
</table>
<script>
document.addEventListener("DOMContentLoaded", () => {
  console.log("üìò Daily Log page loaded");

  // 1Ô∏è‚É£ Get stored profiles safely
  const storeRaw = localStorage.getItem("levelupQuest_profiles");
  if (!storeRaw) {
    console.warn("No saved data found ‚Äî daily log empty");
    return;
  }

  let store;
  try {
    store = JSON.parse(storeRaw);
  } catch (e) {
    console.error("Corrupted localStorage data:", e);
    return;
  }

  // 2Ô∏è‚É£ Identify active player
  const active = store.activeProfile;
  if (!active || !store.profiles[active]) {
    console.warn("No active profile found");
    return;
  }

  const log = store.profiles[active].dailyLog || [];
  console.log(`Loaded ${log.length} log entries for ${active}`);

  // 3Ô∏è‚É£ Get table body
  const tbody = document.querySelector("tbody");
  if (!tbody) {
    console.error("No <tbody> found in table");
    return;
  }

  // 4Ô∏è‚É£ Populate table rows
  if (log.length === 0) {
    const row = document.createElement("tr");
    row.innerHTML = `<td colspan="4" style="text-align:center;">No log entries yet.</td>`;
    tbody.appendChild(row);
  } else {
    log.slice().reverse().forEach(entry => {
      const row = document.createElement("tr");
      const completed = entry.completed?.join(", ") || "(none)";
      row.innerHTML = `
        <td>${entry.date || "-"}</td>
        <td>${completed}</td>
        <td>${entry.xp ?? 0}</td>
        <td>${entry.gp ?? 0}</td>
      `;
      tbody.appendChild(row);
    });
  }

  // 5Ô∏è‚É£ Optional styling feedback
  console.log("‚úÖ Daily Log rendered successfully");
});
</script>
</body>
</html>




