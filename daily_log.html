<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LevelUp Quest â€” Daily Log</title>
<style>
body {
  background:#001a66;
  color:#55ffff;
  font-family:"Courier New", monospace;
  padding:20px;
}
a { color:#ffff55; text-decoration:none; }
table { border-collapse:collapse; width:100%; margin-top:10px; }
th, td { border:1px solid #55ffff; padding:6px 8px; text-align:left; }
th { background:#0b2a7a; }
tr.highlight td { background:#16204f; }
</style>
</head>
<body>
<h1>ðŸ“˜ Daily Log</h1>
<p><a href="index.html">â¬… Back to Game</a></p>
<div id="logContainer">Loading log...</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const PROFILES_KEY = "levelupQuest_profiles";
  const raw = localStorage.getItem(PROFILES_KEY);
  console.log("RAW STORAGE:", raw);

  const container = document.getElementById("logContainer");

  if (!raw) {
    container.innerHTML = "<p>No local save found. Play the game first.</p>";
    return;
  }

  let store;
  try { store = JSON.parse(raw); }
  catch { container.innerHTML = "<p>Error parsing save data.</p>"; return; }

  if (!store.activeProfile || !store.profiles || !store.profiles[store.activeProfile]) {
    container.innerHTML = "<p>No active profile found.</p>";
    return;
  }

  const player = store.profiles[store.activeProfile];
  const log = Array.isArray(player.dailyLog) ? player.dailyLog : [];
  console.log("DAILY LOG ARRAY:", log);

  if (log.length === 0) {
    container.innerHTML = "<p>No daily entries yet. Complete a day to see it here.</p>";
    return;
  }

  const today = new Date().toISOString().split("T")[0];
  let html = `
    <table>
      <tr><th>Date</th><th>Completed</th><th>XP</th><th>GP</th><th>Event</th></tr>
  `;
  log.slice().reverse().forEach(entry => {
    const isToday = entry.date.includes(today);
    html += `
      <tr class="${isToday ? 'highlight' : ''}">
        <td>${entry.date}</td>
        <td>${(entry.completed && entry.completed.length ? entry.completed.join(", ") : "â€”")}</td>
        <td>${entry.xp ?? "â€”"}</td>
        <td>${entry.gp ?? "â€”"}</td>
        <td>${entry.event ?? "â€”"}</td>
      </tr>
    `;
  });
  html += "</table>";
  container.innerHTML = html;
});
</script>
</body>
</html>



